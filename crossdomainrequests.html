<!DOCTYPE html>

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
	<title>untitled</title>
	<style type="text/css">
		body { text-align: center; }
	</style>
</head>
<body>
	<h1>Cross-Domain AJAX Requests with jQuery and YQL </h1>
	<div id="container">
		<form>
			<p><label>Type a URL : </label> <input type="text" name="sitename" id="sitename" /></p>
			<p><input type="submit" name="submit" id="submit" value="Make Cross-Domain AJAX Request"></p>
		</form>	
	</div>
	
     
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js" type="text/javascript" charset="utf-8"></script>	
<script type="text/javascript">

	function requestCrossDomain(site) {
		if ( !site ) return false;
		var that = this;
		
		function isExternal(url) {
			return !RegExp(location.protocol + '//' + location.hostname).test(url);
		}
		
		if ( isExternal(site) ) {
			// cross domain request
			yql = 'http://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent('select * from html where url="' + site + '"') + '&format=xml&callback=?';

			$.getJSON(yql, function(data) {
				data = data.results[0].replace(/<script[^>]*>[\s\S]*?<\/script>/g,'');

				$(that).parent().html(data);
			});
		}
		
		else {
			// local request
			$(that).parent().load(site);
		}
	}
	
	$('form').submit(function() {
		var path = $('#sitename').val();
		requestCrossDomain.call(this, path);
		return false;
	});

</script>
</body>
</html>